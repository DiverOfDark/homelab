---
- name: Enforce minimum Ansible version
  ansible.builtin.assert:
    that:
      - ansible_version.full is version('2.14', '>=')
    msg: "Minimum ansible-core version required is 2.14"

- name: Configure System
  include_tasks: system.yml

- name: Populate service facts
  ansible.builtin.service_facts:

- name: Gather the package facts
  ansible.builtin.package_facts:
    manager: auto

- name: Prepare for K3S
  include_tasks: k3s-config.yml

- name: Configure Keepalived
  include_tasks: keepalived.yml

- name: Configure MySQL
  include_tasks: mysql.yml