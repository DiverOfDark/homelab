---
- name: Enforce minimum Ansible version
  ansible.builtin.assert:
    that:
      - ansible_version.full is version('2.14', '>=')
    msg: "Minimum ansible-core version required is 2.14"

- name: Configure System
  include_tasks: system.yml
  when: prepare_system

- name: Prepare for K3S
  include_tasks: k3s-config.yml
  when: prepare_k3s

- name: Configure Keepalived
  include_tasks: keepalived.yml
  when: prepare_keepalived

- name: Configure MySQL
  include_tasks: mysql.yml
  when: prepare_mysql
